(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,n){e.exports=n(294)},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},294:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(32),c=n.n(o),i=(n(133),n(22)),s=n(23),p=n(26),l=n(24),u=n(27),d=(n(134),n(124)),h=n(38),m=(n(135),n(25)),v=n(17),E=n.n(v),f=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){n.props.dispatch({type:"FETCH_ONE_MOVIE",payload:n.props.movie.id}),n.props.history.push("/details/"+n.props.movie.id)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{item:!0,xs:3},r.a.createElement("img",{src:this.props.movie.poster,alt:this.props.movie.title,onClick:this.handleClick}))}}]),t}(a.Component),O=Object(m.b)()(f),b=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"flex-start"},this.props.reduxState.movies.map(function(t){return r.a.createElement(O,{key:t.id,movie:t,history:e.props.history})}))}}]),t}(a.Component),y=Object(m.b)(function(e){return{reduxState:e}})(b),j=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_MOVIES"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,{history:this.props.history}))}}]),t}(a.Component),g=Object(m.b)()(j),x=n(37),_=n.n(x),w=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.movieId;this.props.dispatch({type:"FETCH_ONE_MOVIE",payload:e}),this.props.dispatch({type:"FETCH_ONE_MOVIE_GENRES",payload:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(E.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(E.a,{item:!0,xs:3},r.a.createElement(_.a,{onClick:function(){return e.props.history.push("/")}},"Back to List"),r.a.createElement(_.a,{onClick:function(){return e.props.history.push("/edit/".concat(e.props.match.params.movieId))}},"Edit")),r.a.createElement(E.a,{item:!0,xs:6},r.a.createElement("h3",null,this.props.reduxState.oneMovie.title)),r.a.createElement(E.a,{item:!0,xs:3},r.a.createElement("h4",null,"Genres:"))),r.a.createElement(E.a,{container:!0},r.a.createElement(E.a,{item:!0,xs:3},r.a.createElement("img",{src:this.props.reduxState.oneMovie.poster,alt:this.props.reduxState.oneMovie.title})),r.a.createElement(E.a,{item:!0,xs:6},r.a.createElement("p",null,this.props.reduxState.oneMovie.description)),r.a.createElement(E.a,{item:!0,xs:3},this.props.reduxState.oneMovieGenres.map(function(e){return r.a.createElement("div",{key:e.id},e.name)}))))}}]),t}(a.Component),k=Object(m.b)(function(e){return{reduxState:e}})(w),S=n(57),C=n(120),M=n(76),I=n.n(M),N=n(75),T=n.n(N),G=n(121),V=n.n(G),F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",genre_id:""},n.addGenre=function(){""===n.state.genre_id?alert("please select a genre to add."):n.props.dispatch({type:"ADD_GENRE",payload:{movie_id:n.props.movieId,genre_id:n.state.genre_id}})},n.handleChange=function(e,t){n.setState({name:e.target.value,genre_id:t.key})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_GENRES"})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{value:this.state.name,onChange:this.handleChange},this.props.reduxState.genres.map(function(e){return r.a.createElement(V.a,{key:e.id,value:e.name},e.name)})),r.a.createElement(_.a,{onClick:this.addGenre},"Add Genre"))}}]),t}(a.Component),D=Object(m.b)(function(e){return{reduxState:e}})(F),R=n(122),H=n.n(R),A=n(123),W=n.n(A),L=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(){n.props.dispatch({type:"DELETE_GENRE",payload:{relation_id:n.props.genre.id,movie_id:n.props.movieId}})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.genre.name,r.a.createElement(H.a,{"aria-label":"Delete",onClick:this.handleDelete},r.a.createElement(W.a,null)))}}]),t}(a.Component),U=Object(m.b)()(L),B=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Genres:"),this.props.reduxState.oneMovieGenres.map(function(t){return r.a.createElement(U,{key:t.id,genre:t,movieId:e.props.movieId})}))}}]),t}(a.Component),J=Object(m.b)(function(e){return{reduxState:e}})(B),P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={title:null,description:null},n.updateMovie=function(){var e=n.state.title,t=n.state.description;null===e&&(e=n.props.reduxState.oneMovie.title),null===t&&(t=n.props.reduxState.oneMovie.description),n.dispatchUpdate(e,t),n.props.history.push("/details/".concat(n.props.match.params.movieId))},n.dispatchUpdate=function(e,t){n.props.dispatch({type:"UPDATE_MOVIE",payload:{title:e,description:t,id:n.props.match.params.movieId}})},n.handleChangeFor=function(e){return function(t){n.setState(Object(C.a)({},n.state,Object(S.a)({},e,t.target.value)))}},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.movieId;this.props.dispatch({type:"FETCH_ONE_MOVIE",payload:e}),this.props.dispatch({type:"FETCH_ONE_MOVIE_GENRES",payload:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(E.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(E.a,{item:!0,xs:3},r.a.createElement(_.a,{onClick:function(){return e.props.history.push("/details/".concat(e.props.match.params.movieId))}},"Cancel"),r.a.createElement(_.a,{onClick:this.updateMovie},"Save")),r.a.createElement(E.a,{item:!0,xs:6},r.a.createElement(I.a,{onChange:this.handleChangeFor("title"),fullWidth:!0,margin:"normal",multiline:!0,rowsMax:"20",label:"Title",defaultValue:this.props.reduxState.oneMovie.title,variant:"outlined"})),r.a.createElement(E.a,{item:!0,xs:3},r.a.createElement(D,{movieId:this.props.match.params.movieId}))),r.a.createElement(E.a,{container:!0},r.a.createElement(E.a,{item:!0,xs:3},r.a.createElement("img",{src:this.props.reduxState.oneMovie.poster,alt:this.props.reduxState.oneMovie.title})),r.a.createElement(E.a,{item:!0,xs:6},r.a.createElement(I.a,{onChange:this.handleChangeFor("description"),fullWidth:!0,margin:"normal",multiline:!0,rowsMax:"20",label:"Description",defaultValue:this.props.reduxState.oneMovie.description,variant:"outlined"})),r.a.createElement(E.a,{item:!0,xs:3},r.a.createElement(J,{movieId:this.props.match.params.movieId}))))}}]),t}(a.Component),Q=Object(m.b)(function(e){return{reduxState:e}})(P),$=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(h.a,{path:"/",exact:!0,component:g}),r.a.createElement(h.a,{path:"/details/:movieId",component:k}),r.a.createElement(h.a,{path:"/edit/:movieId",component:Q}))}}]),t}(a.Component),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var K=n(34),X=n(126),Y=n.n(X),Z=n(127),ee=n(14),te=n.n(ee),ne=n(13),ae=n(35),re=n.n(ae),oe=te.a.mark(pe),ce=te.a.mark(le),ie=te.a.mark(ue),se=te.a.mark(de);function pe(){var e;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ne.b)(re.a.get,"/api/movies");case 3:return e=t.sent,t.next=6,Object(ne.c)({type:"SET_MOVIES",payload:e.data});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},oe,null,[[0,8]])}function le(e){var t;return te.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ne.b)(re.a.get,"/api/movies/details/".concat(e.payload));case 3:return t=n.sent,n.next=6,Object(ne.c)({type:"SET_ONE_MOVIE",payload:t.data[0]});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},ce,null,[[0,8]])}function ue(e){return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ne.b)(re.a.put,"/api/movies",e.payload);case 3:return t.next=5,Object(ne.c)({type:"FETCH_ONE_MOVIE",payload:e.payload.id});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},ie,null,[[0,7]])}function de(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.d)("FETCH_MOVIES",pe);case 2:return e.next=4,Object(ne.d)("FETCH_ONE_MOVIE",le);case 4:return e.next=6,Object(ne.d)("UPDATE_MOVIE",ue);case 6:case"end":return e.stop()}},se)}var he=de,me=te.a.mark(be),ve=te.a.mark(ye),Ee=te.a.mark(je),fe=te.a.mark(ge),Oe=te.a.mark(xe);function be(){var e;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ne.b)(re.a.get,"/api/genres");case 3:return e=t.sent,t.next=6,Object(ne.c)({type:"SET_GENRES",payload:e.data});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},me,null,[[0,8]])}function ye(e){var t;return te.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ne.b)(re.a.get,"/api/genres/".concat(e.payload));case 3:return t=n.sent,n.next=6,Object(ne.c)({type:"SET_ONE_MOVIE_GENRES",payload:t.data});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},ve,null,[[0,8]])}function je(e){return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ne.b)(re.a.post,"/api/genres",e.payload);case 3:return t.next=5,Object(ne.c)({type:"FETCH_ONE_MOVIE_GENRES",payload:e.payload.movie_id});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},Ee,null,[[0,7]])}function ge(e){return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e.payload),t.next=4,Object(ne.b)(re.a.delete,"/api/genres/".concat(e.payload.relation_id));case 4:return t.next=6,Object(ne.c)({type:"FETCH_ONE_MOVIE_GENRES",payload:e.payload.movie_id});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},fe,null,[[0,8]])}function xe(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.d)("FETCH_ONE_MOVIE_GENRES",ye);case 2:return e.next=4,Object(ne.d)("FETCH_GENRES",be);case 4:return e.next=6,Object(ne.d)("ADD_GENRE",je);case 6:return e.next=8,Object(ne.d)("DELETE_GENRE",ge);case 8:case"end":return e.stop()}},Oe)}var _e=xe,we=te.a.mark(ke);function ke(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.a)([he(),_e()]);case 2:case"end":return e.stop()}},we)}var Se=ke,Ce={id:0,title:"",poster:"",description:""},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[Ce],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MOVIES":return t.payload;default:return e}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GENRES":return t.payload;default:return e}},Ne={id:0,title:"",poster:"",description:""},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[Ne],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ONE_MOVIE":return t.payload;default:return e}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ONE_MOVIE_GENRES":return t.payload;default:return e}},Ve=Object(K.c)({movies:Me,genres:Ie,oneMovie:Te,oneMovieGenres:Ge}),Fe=Object(Z.a)(),De=Object(K.e)(Ve,Object(K.a)(Fe,Y.a));Fe.run(Se),c.a.render(r.a.createElement(m.a,{store:De},r.a.createElement($,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");q?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):z(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):z(e)})}}()}},[[128,1,2]]]);
//# sourceMappingURL=main.6cfccf04.chunk.js.map